<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <link rel="stylesheet" href="common.css">
        <title>Sign In/Register</title>
        
    </head>
    <body>
        <div id="divLogo" class="logo">
            <img id="imgLogo" src="images/logo.png" class="logoImgv1">
        </div>

        <div id="divToggle" class="toggle">
            <div class="inner"><button id="toggleSignIn" type="submit" class="sbtnTogLogin">Sign In</button></div>
            <div class="inner"><button id="toggleRegister" type="submit" class="sbtnTogRegister">Register</button></div>
        </div>

        <div id="blockSignIn" class="signinBlock">
          <div class="marginDiv">
            <div class="w3-container w3-green">
              <h2>Sign In</h2>
            </div class="w3-container">
            <p>      
            <label class="w3-text-green"><b>Username/Email</b></label>
            <input id="inpUser" class="w3-input w3-border w3-sand" name="first" type="text"></p>
            <p>      
            <label class="w3-text-green"><b>Password</b></label>
            <input id="inpPass" class="w3-input w3-border w3-sand" name="last" type="password"></p>
            <input class="showPassClass" type="checkbox" onclick="showPasswordSignIn()">Show Password
            <p>
            <button id="btnSubmit" class="w3-btn w3-green">Sign In</button></p>
            <div id="userError" style="color: red; font-style: italic;"></div>
          </div>    
        </div>

        <div id="blockRegister" class="registerBlock">
            <div class="w3-container w3-teal">
              <h2>Register</h2>
            </div>
            <form class="w3-container" action="index.html">
              <p>      
                <label class="w3-text-teal"><b>Username/Email</b></label>
                <input id="regUser" class="w3-input w3-border w3-sand" name="first" type="text">
              </p>
              <p>      
                <label class="w3-text-teal"><b>Password</b></label>
                <input type="password" id="regPass" name="psw" class="w3-input w3-border w3-sand" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required>
              </p>
              <p>      
                <label class="w3-text-teal"><b>Re-enter password</b></label>
                <input id="regPass2" class="w3-input w3-border w3-sand" name="last" type="password">
              </p>
              <div id="message">
                <div class="passRestrictions">Password must contain the following:</div>
                <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
                <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
                <p id="number" class="invalid">A <b>number</b></p>
                <p id="length" class="invalid">Minimum <b>8 characters</b></p>
              </div>
              <p>
                <button id="btnRegister" class="w3-btn w3-teal">Register</button>
                <span id="spPassError" class="passError">Passwords do not match. Please try again.</span>
              </p>
              
            </form>
        </div>
        
        <script src="loginpage.js"></script>

        <script>
          var myInput = document.getElementById("regPass");
          var letter = document.getElementById("letter");
          var capital = document.getElementById("capital");
          var number = document.getElementById("number");
          var length = document.getElementById("length");
          
          myInput.onfocus = function() {
            document.getElementById("message").style.display = "block";
          }

          myInput.onblur = function() {
            document.getElementById("message").style.display = "none";
          }

          myInput.onkeyup = function() {
            var lowerCaseLetters = /[a-z]/g;
            if(myInput.value.match(lowerCaseLetters)) {
              letter.classList.remove("invalid");
              letter.classList.add("valid");
            } else {
              letter.classList.remove("valid");
              letter.classList.add("invalid");
          }

            var upperCaseLetters = /[A-Z]/g;
            if(myInput.value.match(upperCaseLetters)) {
              capital.classList.remove("invalid");
              capital.classList.add("valid");
            } else {
              capital.classList.remove("valid");
              capital.classList.add("invalid");
            }

            var numbers = /[0-9]/g;
            if(myInput.value.match(numbers)) {
              number.classList.remove("invalid");
              number.classList.add("valid");
            } else {
              number.classList.remove("valid");
              number.classList.add("invalid");
            }

            if(myInput.value.length >= 8) {
              length.classList.remove("invalid");
              length.classList.add("valid");
            } else {
              length.classList.remove("valid");
              length.classList.add("invalid");
            }
          }
        </script>
    </body>
</html>
